<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>policypool feed</title>
    <style>
      :root {
        color-scheme: light dark;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        line-height: 1.5;
        font-size: 16px;
        --accent: #ff6600;
        --bg: #f7f7f7;
      }

      body {
        margin: 0;
        padding: 0;
        background: var(--bg);
        color: #333;
      }

      header {
        background: #fff;
        border-bottom: 3px solid var(--accent);
        padding: 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
      }

      header .brand {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--accent);
        text-transform: lowercase;
        letter-spacing: 0.03em;
      }

      header nav {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
      }

      .cta {
        background: var(--accent);
        color: #fff;
        border: none;
        border-radius: 0.25rem;
        padding: 0.5rem 0.9rem;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.9rem;
      }

      .cta.secondary {
        background: transparent;
        color: var(--accent);
        border: 1px solid var(--accent);
      }

      main {
        max-width: 960px;
        margin: 0 auto;
        padding: 2rem 1rem 4rem;
      }

      .hero {
        background: #fff;
        border: 1px solid #ececec;
        border-radius: 0.5rem;
        padding: 1.5rem;
        margin-bottom: 2rem;
      }

      .hero h1 {
        margin: 0 0 0.75rem;
        font-size: 2rem;
      }

      .hero p {
        margin: 0 0 1.25rem;
        color: #555;
      }

      .feed-list {
        background: #fff;
        border: 1px solid #ececec;
        border-radius: 0.5rem;
        padding: 0;
        margin: 0;
      }

      .feed-list ol {
        list-style: decimal;
        padding-left: 2.5rem;
        margin: 0;
      }

      .feed-item {
        padding: 0.85rem 1.25rem;
        border-top: 1px solid #f0f0f0;
      }

      .feed-item:first-child {
        border-top: none;
      }

      .feed-item a.title {
        font-weight: 600;
        color: #222;
        text-decoration: none;
      }

      .feed-item a.title:hover {
        text-decoration: underline;
      }

      .meta {
        font-size: 0.85rem;
        color: #777;
        margin-top: 0.25rem;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="brand">policypool</div>
      <nav>
        <a class="cta" href="https://airtable.com/shrSubmissionForm" target="_blank" rel="noopener noreferrer"
          >Submit a link</a
        >
        <a class="cta secondary" href="https://airtable.com/apppolicypool" target="_blank" rel="noopener noreferrer"
          >View Airtable base</a
        >
      </nav>
    </header>

    <main>
      <section class="hero">
        <h1>Fresh writing from former federal employees</h1>
        <p>
          The policypool feed highlights essays, reports, and analysis from recently departed government experts.
          Every item shown below is sourced from Airtable rows that have been marked <strong>approved</strong> by the
          editorial team.
        </p>
        <p>
          Use the buttons above to contribute new pieces or inspect the underlying Airtable base if you want to browse
          the raw submissions.
        </p>
      </section>

      <section class="feed-list" aria-label="Latest approved submissions">
        <ol id="feed"></ol>
      </section>
    </main>

    <template id="feed-item-template">
      <li class="feed-item">
        <a class="title" href="" target="_blank" rel="noopener noreferrer"></a>
        <div class="meta"></div>
      </li>
    </template>

    <script>
      // Placeholder data to illustrate the Hacker News–like layout. Replace with real Airtable API calls.
      const approvedRows = [
        {
          title: "How to make procurement faster",
          url: "https://example.com/procurement",
          source: "example.com",
          author: "S. Analyst",
          published: "Mar 10, 2024",
          upvotes: 24,
        },
        {
          title: "Lessons from the Inflation Reduction Act rollout",
          url: "https://example.org/ira-rollout",
          source: "example.org",
          author: "J. Policy",
          published: "Mar 8, 2024",
          upvotes: 18,
        },
      ];

      const feedList = document.querySelector("#feed");
      const template = document.querySelector("#feed-item-template");

      approvedRows.forEach((row, index) => {
        const clone = template.content.cloneNode(true);
        const li = clone.querySelector(".feed-item");
        const titleLink = clone.querySelector(".title");
        const meta = clone.querySelector(".meta");

        titleLink.href = row.url;
        titleLink.textContent = `${row.title} (${row.source})`;

        meta.textContent = `Posted by ${row.author} • ${row.published} • ${row.upvotes} votes`;

        li.setAttribute("data-airtable-approved-index", index);
        feedList.appendChild(clone);
      });
    </script>
  </body>
</html>
